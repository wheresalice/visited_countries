{{ define "main" }}
      {{ $regions := apply $.Site.Data.countries "index" "." "region"| uniq}}
      {{ $visitedCount := where $.Site.Data.countries ".visited" "gt" 0 | len}}
      <header>
        <nav>
          <ul>
            {{ range $regions }}
            <li><a href="#{{.}}">{{.}}</a></li>
            {{ end }}
          </ul>
        </nav>
      </header>
    <main>
      <section>
        <table>
            <tr>
              <td>visited countries</td><td>{{ $visitedCount}}</td>
            </tr>
            <tr>
              <td>countries left for provisional <abbr title="Travelers Century Club">TCC</abbr> membership</td><td>{{ sub 75 $visitedCount}}</td>
            </tr>
            <tr>
              <td>countries left for full <abbr title="Travelers Century Club">TCC</abbr> membership</td><td>{{ sub 100 $visitedCount}}</td>
            </tr>
            <tr>
              <td>percentage visited</td><td>{{ mul (div (float $visitedCount) ($.Site.Data.countries | len)) 100 | printf "%18.1f"}}</td>
            </tr>
        </table>
      </section>
      {{ range $regions }}
      <h2><a id="{{ . }}">{{ . }}</a></h2>
      <ul>
        {{ range where $.Site.Data.countries ".region" .}}
        {{ $nameSlug := urlize .name}}
        {{ if eq .visited 0}}<li>❌ {{ .name }} {{ if os.FileExists (printf "country/%s.md" $nameSlug) }}<a href="{{ printf "/country/%s" $nameSlug}}">🔗</a>{{ end }}</li>{{ end }}
        {{ if eq .visited 0.5}}<li>✈️ {{ .name }} {{ if os.FileExists (printf "country/%s.md" $nameSlug) }}<a href="{{ printf "/country/%s" $nameSlug}}">🔗</a>{{ end }}</li>{{ end }}
        {{ if eq .visited 1}}<li>✅ {{ .name }} {{ if os.FileExists (printf "country/%s.md" $nameSlug) }}<a href="{{ printf "/country/%s" $nameSlug}}">🔗</a>{{ end }}</li>{{ end }}
        {{ end }}
      </ul>
      {{ end }}
    </main>
{{ end }}
